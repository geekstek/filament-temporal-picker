/*! name: vanilla-calendar-pro v2.9.10 | url: https://github.com/uvarov-frontend/vanilla-calendar-pro */var Me=Object.defineProperty,j=Object.getOwnPropertySymbols,fe=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable,Y=(e,t,a)=>t in e?Me(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,ne=(e,t)=>{for(var a in t||(t={}))fe.call(t,a)&&Y(e,a,t[a]);if(j)for(var a of j(t))be.call(t,a)&&Y(e,a,t[a]);return e},u=(e,t,a)=>(Y(e,typeof t!="symbol"?t+"":t,a),a);const Ce={calendar:"vanilla-calendar",calendarDefault:"vanilla-calendar_default",calendarMultiple:"vanilla-calendar_multiple",calendarMonth:"vanilla-calendar_month",calendarYear:"vanilla-calendar_year",calendarHidden:"vanilla-calendar_hidden",calendarToInput:"vanilla-calendar_to-input",calendarToInputTop:"vanilla-calendar_to-input_top",calendarToInputBottom:"vanilla-calendar_to-input_bottom",controls:"vanilla-calendar-controls",grid:"vanilla-calendar-grid",gridDisabled:"vanilla-calendar-grid_disabled",column:"vanilla-calendar-column",columnMonth:"vanilla-calendar-column_month",columnYear:"vanilla-calendar-column_year",header:"vanilla-calendar-header",headerContent:"vanilla-calendar-header__content",month:"vanilla-calendar-month",monthDisabled:"vanilla-calendar-month_disabled",year:"vanilla-calendar-year",yearDisabled:"vanilla-calendar-year_disabled",arrow:"vanilla-calendar-arrow",arrowPrev:"vanilla-calendar-arrow_prev",arrowNext:"vanilla-calendar-arrow_next",wrapper:"vanilla-calendar-wrapper",content:"vanilla-calendar-content",week:"vanilla-calendar-week",weekDay:"vanilla-calendar-week__day",weekDayWeekend:"vanilla-calendar-week__day_weekend",days:"vanilla-calendar-days",daysSelecting:"vanilla-calendar-days_selecting",months:"vanilla-calendar-months",monthsSelecting:"vanilla-calendar-months_selecting",monthsMonth:"vanilla-calendar-months__month",monthsMonthSelected:"vanilla-calendar-months__month_selected",monthsMonthDisabled:"vanilla-calendar-months__month_disabled",years:"vanilla-calendar-years",yearsSelecting:"vanilla-calendar-years_selecting",yearsYear:"vanilla-calendar-years__year",yearsYearSelected:"vanilla-calendar-years__year_selected",yearsYearDisabled:"vanilla-calendar-years__year_disabled",time:"vanilla-calendar-time",timeContent:"vanilla-calendar-time__content",timeHours:"vanilla-calendar-time__hours",timeMinutes:"vanilla-calendar-time__minutes",timeKeeping:"vanilla-calendar-time__keeping",timeRanges:"vanilla-calendar-time__ranges",timeRange:"vanilla-calendar-time__range",day:"vanilla-calendar-day",dayHoverFirst:"vanilla-calendar-day_hover-first",dayHoverLast:"vanilla-calendar-day_hover-last",dayHoverIntermediate:"vanilla-calendar-day_hover-intermediate",daySelectedFirst:"vanilla-calendar-day_selected-first",daySelectedLast:"vanilla-calendar-day_selected-last",daySelectedIntermediate:"vanilla-calendar-day_selected-intermediate",dayPopup:"vanilla-calendar-day__popup",dayBtn:"vanilla-calendar-day__btn",dayBtnPrev:"vanilla-calendar-day__btn_prev",dayBtnNext:"vanilla-calendar-day__btn_next",dayBtnToday:"vanilla-calendar-day__btn_today",dayBtnSelected:"vanilla-calendar-day__btn_selected",dayBtnHover:"vanilla-calendar-day__btn_hover",dayBtnDisabled:"vanilla-calendar-day__btn_disabled",dayBtnWeekend:"vanilla-calendar-day__btn_weekend",dayBtnHoliday:"vanilla-calendar-day__btn_holiday",weekNumbers:"vanilla-calendar-week-numbers",weekNumbersTitle:"vanilla-calendar-week-numbers__title",weekNumbersContent:"vanilla-calendar-week-numbers__content",weekNumber:"vanilla-calendar-week-number",isFocus:"vanilla-calendar-is-focus"},De=e=>`<div class="${e.controls}"><#ArrowPrev /><#ArrowNext /></div><div class="${e.grid}"><#Multiple><div class="${e.column}"><div class="${e.header}"><div class="${e.headerContent}"><#Month /><#Year /></div></div><div class="${e.wrapper}"><#WeekNumbers /><div class="${e.content}"><#Week /><#Days /></div></div></div><#/Multiple></div><#ControlTime />`,we=e=>`<div class="${e.header}"><div class="${e.headerContent}"><#Month /><#Year /></div></div><div class="${e.wrapper}"><div class="${e.content}"><#Months /></div></div>`,Te=e=>`<div class="${e.header}"><#ArrowPrev /><div class="${e.headerContent}"><#Month /><#Year /></div><#ArrowNext /></div><div class="${e.wrapper}"><div class="${e.content}"><#Years /></div></div>`;class Ee{constructor(){var t;u(this,"isInit",!1),u(this,"isInputInit",!1),u(this,"input",!1),u(this,"type","default"),u(this,"months",2),u(this,"jumpMonths",1),u(this,"jumpToSelectedDate",!1),u(this,"toggleSelected",!0),u(this,"date",{min:"1970-01-01",max:"2470-12-31",today:new Date}),u(this,"settings",{lang:"en",iso8601:!0,range:{min:void 0,max:void 0,disablePast:!1,disableGaps:!1,edgesOnly:!1,disableAllDays:!1,disableWeekday:void 0,disabled:void 0,enabled:void 0},selection:{day:"single",month:!0,year:!0,time:!1,controlTime:"all",stepHours:1,stepMinutes:1,cancelableDay:!0},selected:{dates:void 0,month:void 0,year:void 0,holidays:void 0,time:void 0},visibility:{theme:"system",themeDetect:"html[data-theme]",monthShort:!0,weekNumbers:!1,weekend:!0,today:!0,disabled:!1,daysOutside:!0,positionToInput:"left"}}),u(this,"locale",{months:[],weekday:[]}),u(this,"sanitizer",(a=>a)),u(this,"actions",{clickDay:null,clickWeekNumber:null,clickMonth:null,clickYear:null,clickArrow:null,changeTime:null,changeToInput:null,getDays:null,getMonths:null,getYears:null,initCalendar:null,updateCalendar:null,destroyCalendar:null,showCalendar:null,hideCalendar:null}),u(this,"popups",{}),u(this,"CSSClasses",ne({},Ce)),u(this,"DOMTemplates",{default:(t=this.CSSClasses,`<div class="${t.header}"><#ArrowPrev /><div class="${t.headerContent}"><#Month /><#Year /></div><#ArrowNext /></div><div class="${t.wrapper}"><#WeekNumbers /><div class="${t.content}"><#Week /><#Days /></div></div><#ControlTime />`),multiple:De(this.CSSClasses),month:we(this.CSSClasses),year:Te(this.CSSClasses)}),u(this,"HTMLElement"),u(this,"HTMLOriginalElement"),u(this,"HTMLInputElement"),u(this,"rangeMin"),u(this,"rangeMax"),u(this,"rangeDisabled"),u(this,"rangeEnabled"),u(this,"selectedDates"),u(this,"selectedHolidays"),u(this,"selectedMonth"),u(this,"selectedYear"),u(this,"selectedHours"),u(this,"selectedMinutes"),u(this,"selectedKeeping"),u(this,"selectedTime"),u(this,"currentType"),u(this,"correctMonths"),u(this,"viewYear"),u(this,"dateMin"),u(this,"dateMax")}}const v=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,g=e=>new Date(`${e}T00:00:00`),f=e=>e.reduce(((t,a)=>{if(a instanceof Date||typeof a=="number"){const s=a instanceof Date?a:new Date(a);t.push(s.toISOString().substring(0,10))}else a.match(/^(\d{4}-\d{2}-\d{2})$/g)?t.push(a):a.replace(/(\d{4}-\d{2}-\d{2}).*?(\d{4}-\d{2}-\d{2})/g,((s,n,l)=>{const i=g(n),r=g(l),d=new Date(i.getTime());for(;d<=r;d.setDate(d.getDate()+1))t.push(v(d));return s}));return t}),[]),T=()=>{const e=new Date;return new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().substring(0,10)},D=e=>e?{0:"12",13:"01",14:"02",15:"03",16:"04",17:"05",18:"06",19:"07",20:"08",21:"09",22:"10",23:"11"}[Number(e)]||String(e):"",b={notFoundSelector:e=>`${e} is not found, check the first argument passed to new VanillaCalendar.`,notInit:'The calendar has not been initialized, please initialize it using the "init()" method first.',notLocale:'You specified "define" for "settings.lang" but did not provide the required values for "locale.weekday" or "locale.months".',incorrectTheme:'Incorrect name of theme in "settings.visibility.theme".',incorrectTime:"The value of the time property can be: false, true, 12 or 24."},$e=e=>{var t;if(e.jumpToSelectedDate&&((t=e.settings.selected.dates)!=null&&t.length)&&e.settings.selected.month===void 0&&e.settings.selected.year===void 0){const n=g(f(e.settings.selected.dates)[0]);e.settings.selected.month=n.getMonth(),e.settings.selected.year=n.getFullYear()}const a=e.settings.selected.month!==void 0&&Number(e.settings.selected.month)>=0&&Number(e.settings.selected.month)<12,s=e.settings.selected.year!==void 0&&Number(e.settings.selected.year)>=0&&Number(e.settings.selected.year)<=9999;e.selectedMonth=a?Number(e.settings.selected.month):e.date.today.getMonth(),e.selectedYear=s?Number(e.settings.selected.year):e.date.today.getFullYear(),e.viewYear=e.selectedYear},Le=e=>{var t,a,s;e.date.min==="today"&&(e.date.min=T()),e.date.max==="today"&&(e.date.max=T()),e.settings.range.min==="today"&&(e.settings.range.min=T()),e.settings.range.max==="today"&&(e.settings.range.max=T()),e.settings.range.min=e.settings.range.min?g(e.date.min)>=g(e.settings.range.min)?e.date.min:e.settings.range.min:e.date.min,e.settings.range.max=e.settings.range.max?g(e.date.max)<=g(e.settings.range.max)?e.date.max:e.settings.range.max:e.date.max;const n=e.settings.range.disablePast&&!e.settings.range.disableAllDays&&g(e.settings.range.min)<e.date.today;e.rangeMin=n||e.settings.range.disableAllDays?v(e.date.today):e.settings.range.min,e.rangeMax=e.settings.range.disableAllDays?v(e.date.today):e.settings.range.max,e.rangeDisabled=e.settings.range.disabled&&!e.settings.range.disableAllDays?f(e.settings.range.disabled):e.settings.range.disableAllDays?[e.rangeMin]:[],e.rangeDisabled.length>1&&e.rangeDisabled.sort(((l,i)=>+new Date(l)-+new Date(i))),e.rangeEnabled=e.settings.range.enabled?f(e.settings.range.enabled):[],(t=e.rangeEnabled)!=null&&t[0]&&((a=e.rangeDisabled)!=null&&a[0])&&(e.rangeDisabled=e.rangeDisabled.filter((l=>!e.rangeEnabled.includes(l)))),e.rangeEnabled.length>1&&e.rangeEnabled.sort(((l,i)=>+new Date(l)-+new Date(i))),(s=e.rangeEnabled)!=null&&s[0]&&e.settings.range.disableAllDays&&(e.rangeMin=e.rangeEnabled[0],e.rangeMax=e.rangeEnabled[e.rangeEnabled.length-1])},ke=e=>{var t,a;e.selectedDates=(t=e.settings.selected.dates)!=null&&t[0]?f(e.settings.selected.dates):[],e.selectedHolidays=(a=e.settings.selected.holidays)!=null&&a[0]?f(e.settings.selected.holidays):[]},Ye=e=>{e.dateMin=e.settings.visibility.disabled?g(e.date.min):g(e.rangeMin),e.dateMax=e.settings.visibility.disabled?g(e.date.max):g(e.rangeMax)},He=e=>{const t=e.settings.selection.time===!0||e.settings.selection.time===12;if(t||e.settings.selection.time===24){let a=!1;if(typeof e.settings.selected.time=="string"){const s=t?/^([0-9]|0[1-9]|1[0-2]):([0-5][0-9])|(AM|PM)/g:/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])/g;e.settings.selected.time.replace(s,((n,l,i,r)=>(l&&i&&(a=!0,e.selectedHours=l,e.selectedMinutes=i),r&&t?e.selectedKeeping=r:t&&(e.selectedKeeping="AM"),"")))}!a&&t?(e.selectedHours=D(String(e.date.today.getHours())),e.selectedMinutes=String(e.date.today.getMinutes()),e.selectedKeeping=Number(e.date.today.getHours())>=12?"PM":"AM"):a||(e.selectedHours=String(e.date.today.getHours()),e.selectedMinutes=String(e.date.today.getMinutes())),e.selectedHours=Number(e.selectedHours)<10?`0${Number(e.selectedHours)}`:`${e.selectedHours}`,e.selectedMinutes=Number(e.selectedMinutes)<10?`0${Number(e.selectedMinutes)}`:`${e.selectedMinutes}`,e.selectedTime=`${e.selectedHours}:${e.selectedMinutes}${e.selectedKeeping?` ${e.selectedKeeping}`:""}`}else if(e.settings.selection.time)throw new Error(b.incorrectTime)},xe=e=>{e.correctMonths=e.type==="multiple"?e.months===1?2:e.months>12?12:e.months:1},le=e=>{e.currentType=e.type,$e(e),Le(e),ke(e),Ye(e),He(e),xe(e)},R=({arrowPrev:e,arrowNext:t,isPrevHidden:a,isNextHidden:s})=>{e.style.visibility=a?"hidden":"",t.style.visibility=s?"hidden":""},A=e=>{var t,a;if(e.currentType==="month")return;const s=(t=e.HTMLElement)==null?void 0:t.querySelector(`.${e.CSSClasses.arrowPrev}`),n=(a=e.HTMLElement)==null?void 0:a.querySelector(`.${e.CSSClasses.arrowNext}`);!s||!n||{default:()=>{const l=g(v(new Date(e.selectedYear,e.selectedMonth,1))),i=new Date(l.getTime()),r=new Date(l.getTime());i.setMonth(i.getMonth()-e.jumpMonths),r.setMonth(r.getMonth()+e.jumpMonths),e.settings.selection.year||(e.dateMin.setFullYear(l.getFullYear()),e.dateMax.setFullYear(l.getFullYear()));const d=!e.settings.selection.month||i.getFullYear()<e.dateMin.getFullYear()||i.getFullYear()===e.dateMin.getFullYear()&&i.getMonth()<e.dateMin.getMonth(),o=!e.settings.selection.month||r.getFullYear()>e.dateMax.getFullYear()||r.getFullYear()===e.dateMax.getFullYear()&&r.getMonth()>e.dateMax.getMonth();R({arrowPrev:s,arrowNext:n,isPrevHidden:d,isNextHidden:o})},year:()=>{R({arrowPrev:s,arrowNext:n,isPrevHidden:e.dateMin.getFullYear()&&e.viewYear-7<=e.dateMin.getFullYear(),isNextHidden:e.dateMax.getFullYear()&&e.viewYear+7>=e.dateMax.getFullYear()})}}[e.currentType==="multiple"?"default":e.currentType]()},ie=(e,t)=>{if(!e)return null;const a=g(e),s=t?a.getDay()||7:a.getDay();a.setDate(a.getDate()+4-s);const n=new Date(a.getFullYear(),0,1),l=Math.ceil(((+a-+n)/864e5+1)/7);return{year:a.getFullYear(),week:l}};function I(e){if(!e||!e.getBoundingClientRect)return{top:0,bottom:0,left:0,right:0};const t=e.getBoundingClientRect(),a=document.documentElement;return{bottom:t.bottom,right:t.right,top:t.top+window.scrollY-a.clientTop,left:t.left+window.scrollX-a.clientLeft}}function _e(){return{left:window.scrollX||document.documentElement.scrollLeft||0,top:window.scrollY||document.documentElement.scrollTop||0}}function P(){return{vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}}function Ne(e){const{top:t,left:a}=_e(),{top:s,left:n}=I(e),{vh:l,vw:i}=P(),r=s-t,d=n-a;return{top:r,bottom:l-(r+e.clientHeight),left:d,right:i-(d+e.clientWidth)}}function re(e,t,a=5){const s={top:!0,bottom:!0,left:!0,right:!0},n=[];if(!t||!e)return{canShow:s,parentPositions:n};const{bottom:l,top:i}=Ne(e),{top:r,left:d}=I(e),{height:o,width:c}=t.getBoundingClientRect(),{vh:m,vw:y}=P(),p=y/2,q=m/2;return[{condition:r<q,position:"top"},{condition:r>q,position:"bottom"},{condition:d<p,position:"left"},{condition:d>p,position:"right"}].forEach((({condition:ve,position:Se})=>{ve&&n.push(Se)})),Object.assign(s,{top:o<=i-a,bottom:o<=l-a,left:c<=d,right:c<=y-d}),{canShow:s,parentPositions:n}}function Ae(e,t){const a="left";if(!t||!e)return a;const{canShow:s,parentPositions:n}=re(e,t),l=s.left&&s.right;return(l&&s.bottom?"center":l&&s.top?["top","center"]:Array.isArray(n)?[n[0]==="bottom"?"top":"bottom",...n.slice(1)]:n)||a}const H=(e,t,a,s)=>{if(e){const n=a==="auto"?Ae(e,t):a,l={top:-t.offsetHeight,bottom:e.offsetHeight,left:0,center:e.offsetWidth/2-t.offsetWidth/2,right:e.offsetWidth-t.offsetWidth},i=Array.isArray(n)?n[0]:"bottom",r=Array.isArray(n)?n[1]:n;i==="bottom"?(t.classList.remove(s.calendarToInputTop),t.classList.add(s.calendarToInputBottom)):(t.classList.remove(s.calendarToInputBottom),t.classList.add(s.calendarToInputTop));const{top:d,left:o}=I(e),c=d+l[i];let m=o+l[r];const{vw:y}=P();if(m+t.clientWidth>y){const p=window.innerWidth-document.body.clientWidth;m=y-t.clientWidth-p}else m<0&&(m=0);Object.assign(t.style,{left:`${m}px`,top:`${c}px`})}},Ie=(e,t,a,s)=>{const n=e.CSSClasses.dayPopup,l=s.querySelector(`[data-calendar-day="${t}"]`);if(l&&(a!=null&&a.modifier&&l.classList.add(...a.modifier.trim().split(" ")),a==null?void 0:a.html)){const i=l.parentElement,r=document.createElement("div");r.className=n,r.innerHTML=e.sanitizer(a.html),i.appendChild(r),setTimeout((()=>{if(r){const{canShow:d}=re(i,r),o=5;let c=i.offsetHeight,m=0;d.bottom||(c=-r.offsetHeight-o),d.left&&!d.right&&(m=i.offsetWidth-r.offsetWidth/2),!d.left&&d.right&&(m=r.offsetWidth/2),Object.assign(r.style,{left:`${m}px`,top:`${c}px`})}}))}},Pe=(e,t)=>{var a;e.popups&&((a=Object.entries(e.popups))==null||a.forEach((([s,n])=>Ie(e,s,n,t))))},Oe=(e,t,a,s,n)=>{const l=t[a].querySelector(`.${e.CSSClasses.dayBtn}`),i=ie(l==null?void 0:l.dataset.calendarDay,e.settings.iso8601);if(!i)return;const r=s.cloneNode(!0);r.innerText=String(i.week),r.dataset.calendarYearWeek=String(i.year),n.appendChild(r)},We=(e,t,a,s,n)=>{if(!e.settings.visibility.weekNumbers)return;s.textContent="";const l=document.createElement("b");l.className=e.CSSClasses.weekNumbersTitle,l.innerText="#",s.appendChild(l);const i=document.createElement("div");i.className=e.CSSClasses.weekNumbersContent,s.appendChild(i);const r=document.createElement("button");r.type="button",r.className=e.CSSClasses.weekNumber;const d=n.querySelectorAll(`.${e.CSSClasses.day}`),o=Math.ceil((t+a)/7);for(let c=0;c<o;c++)Oe(e,d,c===0?6:7*c,r,i)},Fe=(e,t,a)=>{var s,n,l,i,r;const d=(s=e.settings.range.disableWeekday)==null?void 0:s.includes(a),o=e.settings.range.disableAllDays&&!!((n=e.rangeEnabled)!=null&&n[0]);!d&&!o||(l=e.rangeEnabled)!=null&&l.includes(t)||(i=e.rangeDisabled)!=null&&i.includes(t)||(e.rangeDisabled.push(t),(r=e.rangeDisabled)==null||r.sort(((c,m)=>+new Date(c)-+new Date(m))))},Be=(e,t,a,s,n,l,i)=>{var r,d,o;if((g(e.rangeMin)>g(l)||g(e.rangeMax)<g(l)||(r=e.rangeDisabled)!=null&&r.includes(l)||!e.settings.selection.month&&i||!e.settings.selection.year&&g(l).getFullYear()!==t)&&(s.classList.add(e.CSSClasses.dayBtnDisabled),s.tabIndex=-1),e.settings.visibility.today&&v(e.date.today)===l&&s.classList.add(e.CSSClasses.dayBtnToday),!e.settings.visibility.weekend||n!==0&&n!==6||s.classList.add(e.CSSClasses.dayBtnWeekend),(d=e.selectedHolidays)!=null&&d.includes(l)&&s.classList.add(e.CSSClasses.dayBtnHoliday),(o=e.selectedDates)!=null&&o.includes(l)&&(s.classList.add(e.CSSClasses.dayBtnSelected),e.selectedDates.length>1&&e.settings.selection.day==="multiple-ranged"&&(e.selectedDates[0]===l&&a.classList.add(e.CSSClasses.daySelectedFirst),e.selectedDates[e.selectedDates.length-1]===l&&a.classList.add(e.CSSClasses.daySelectedLast),e.selectedDates[0]!==l&&e.selectedDates[e.selectedDates.length-1]!==l&&a.classList.add(e.CSSClasses.daySelectedIntermediate))),e.settings.range.edgesOnly&&e.selectedDates.length>1&&e.settings.selection.day==="multiple-ranged"){const c=+new Date(e.selectedDates[0]),m=+new Date(e.selectedDates[e.selectedDates.length-1]),y=+new Date(l);y>c&&y<m&&(s.classList.add(e.CSSClasses.dayBtnSelected),a.classList.add(e.CSSClasses.daySelectedIntermediate))}},O=(e,t,a,s,n,l,i,r)=>{const d=document.createElement("div");d.className=e.CSSClasses.day;const o=document.createElement("button");o.className=`${e.CSSClasses.dayBtn}${r?` ${r}`:""}`,o.type="button",o.innerText=String(s),o.dataset.calendarDay=l,e.settings.visibility.weekNumbers&&(()=>{const c=ie(l,e.settings.iso8601);c&&(o.dataset.calendarWeekNumber=String(c.week))})(),i?e.settings.visibility.daysOutside&&d.appendChild(o):d.appendChild(o),Fe(e,l,n),Be(e,t,d,o,n,l,i),a.appendChild(d),e.actions.getDays&&e.actions.getDays(s,l,d,o,e)},qe=(e,t,a,s,n)=>{let l=new Date(a,s,0).getDate()-(n-1);const i=s===0?a-1:a,r=s===0?12:s<10?`0${s}`:s;for(let d=n;d>0;d--,l++){const o=`${i}-${r}-${l}`,c=g(o).getDay();O(e,a,t,l,c,o,!0,e.CSSClasses.dayBtnPrev)}},je=(e,t,a,s,n)=>{for(let l=1;l<=a;l++){const i=new Date(s,n,l),r=v(i),d=i.getDay();O(e,s,t,l,d,r,!1,null)}},Re=(e,t,a,s,n,l)=>{const i=l+a,r=7*Math.ceil(i/7)-i,d=n+1===12?s+1:s,o=n+1===12?"01":n+2<10?`0${n+2}`:n+2;for(let c=1;c<=r;c++){const m=`${d}-${o}-${c<10?`0${c}`:String(c)}`,y=g(m).getDay();O(e,s,t,c,y,m,!0,e.CSSClasses.dayBtnNext)}},$=e=>{const t=e.HTMLElement.querySelectorAll(`.${e.CSSClasses.days}`),a=e.HTMLElement.querySelectorAll(`.${e.CSSClasses.weekNumbers}`),s=new Date(e.selectedYear,e.selectedMonth,1);t.forEach(((n,l)=>{const i=new Date(s);i.setMonth(i.getMonth()+l);const r=i.getMonth(),d=i.getFullYear(),o=new Date(d,r,1),c=new Date(d,r+1,0).getDate(),m=e.settings.iso8601?(o.getDay()!==0?o.getDay():7)-1:o.getDay();e.settings.selection.day&&n.classList.add(e.CSSClasses.daysSelecting),n.textContent="",qe(e,n,d,r,m),je(e,n,c,d,r),Re(e,n,c,d,r,m),We(e,m,c,a[l],n),Pe(e,n)}))},Ke=(e,t,a,s)=>{const n=new Date(s.setMonth(e.selectedMonth+a)).getMonth(),l=e.settings.selection.month===!1||e.settings.selection.month==="only-arrows";t.tabIndex=l?-1:0,t.classList.toggle(e.CSSClasses.monthDisabled,l),t.setAttribute("data-calendar-selected-month",String(n)),t.innerText=e.locale.months[n]},ze=(e,t,a,s)=>{const n=new Date(s.setFullYear(e.selectedYear,e.selectedMonth+a)).getFullYear(),l=e.settings.selection.year===!1||e.settings.selection.year==="only-arrows";t.tabIndex=l?-1:0,t.classList.toggle(e.CSSClasses.yearDisabled,l),t.setAttribute("data-calendar-selected-year",String(n)),t.innerText=String(n)},k=e=>{var t,a;const s=(t=e.HTMLElement)==null?void 0:t.querySelectorAll("[data-calendar-selected-month]"),n=(a=e.HTMLElement)==null?void 0:a.querySelectorAll("[data-calendar-selected-year]");if(!(s!=null&&s[0])&&(n!=null&&n[0]))return;const l=new Date(e.selectedYear,e.selectedMonth,1);s==null||s.forEach(((i,r)=>Ke(e,i,r,l))),n==null||n.forEach(((i,r)=>ze(e,i,r,l)))},x=(e,t)=>{const a=g(v(new Date(e.selectedYear,e.selectedMonth,1)));({prev:()=>a.setMonth(a.getMonth()-e.jumpMonths),next:()=>a.setMonth(a.getMonth()+e.jumpMonths)})[t](),[e.selectedMonth,e.selectedYear]=[a.getMonth(),a.getFullYear()],k(e),A(e),$(e)},Ve=e=>`<button type="button"class="${e.CSSClasses.arrow} ${e.CSSClasses.arrowPrev}"data-calendar-arrow="prev"></button>`,Ge=e=>`<button type="button"class="${e.CSSClasses.arrow} ${e.CSSClasses.arrowNext}"data-calendar-arrow="next"></button>`,Ze=e=>`<button type="button"class="${e.CSSClasses.month}"data-calendar-selected-month></button>`,Ue=e=>`<button type="button"class="${e.CSSClasses.year}"data-calendar-selected-year></button>`,Xe=e=>`<div class="${e.CSSClasses.week}"></div>`,Je=e=>`<div class="${e.CSSClasses.days}"></div>`,Qe=e=>`<div class="${e.CSSClasses.months}"></div>`,et=e=>`<div class="${e.CSSClasses.years}"></div>`,tt=e=>e.settings.visibility.weekNumbers?`<div class="${e.CSSClasses.weekNumbers}"></div>`:"",at=e=>e.settings.selection.time?`<div class="${e.CSSClasses.time}"></div>`:"",st=Object.freeze(Object.defineProperty({__proto__:null,ArrowNext:Ge,ArrowPrev:Ve,ControlTime:at,Days:Je,Month:Ze,Months:Qe,Week:Xe,WeekNumbers:tt,Year:Ue,Years:et},Symbol.toStringTag,{value:"Module"})),C=(e,t)=>t.replace(/[\n\t]/g,"").replace(/<#(?!\/?Multiple)(.*?)>/g,((a,s)=>{const n=(l=s.replace(/[/\s\n\t]/g,""),st[l]);var l;const i=n?n(e):"";return e.sanitizer(i)})).replace(/[\n\t]/g,""),nt=(e,t)=>t.replace(/<#Multiple>(.*?)<#\/Multiple>/g,((a,s)=>{let n="";for(let l=0;l<e.correctMonths;l++)n+=s;return e.sanitizer(n)})).replace(/[\n\t]/g,""),W=(e,t)=>{const{HTMLElement:a,CSSClasses:s,DOMTemplates:n,type:l,currentType:i,correctMonths:r}=e,d=(c,m)=>{if(!t)return;const y=a.querySelector(`.${s.controls}`);y&&a.removeChild(y),a.querySelector(`.${s.grid}`).classList.add(s.gridDisabled);const p=t.closest(`.${s.column}`);p.classList.add(c),p.innerHTML=C(e,m)},o={default:()=>{a.classList.add(s.calendarDefault),a.classList.remove(s.calendarMonth,s.calendarYear),a.innerHTML=C(e,n.default)},multiple:()=>{r&&(a.classList.add(s.calendarMultiple),a.classList.remove(s.calendarMonth,s.calendarYear),a.innerHTML=nt(e,C(e,n.multiple)))},month:()=>{l!=="multiple"?(a.classList.add(s.calendarMonth),a.classList.remove(s.calendarDefault,s.calendarYear),a.innerHTML=C(e,n.month)):d(s.columnMonth,n.month)},year:()=>{l!=="multiple"?(a.classList.add(s.calendarYear),a.classList.remove(s.calendarDefault,s.calendarMonth),a.innerHTML=C(e,n.year)):d(s.columnYear,n.year)}};a.classList.add(s.calendar),o[i]()},lt=(e,t,a,s,n)=>{const l=t.cloneNode(!1);return l.className=`${e.CSSClasses.yearsYear}${a===n?` ${e.CSSClasses.yearsYearSelected}`:s?` ${e.CSSClasses.yearsYearDisabled}`:""}`,l.dataset.calendarYear=String(n),l.title=String(n),l.innerText=String(n),s&&(l.tabIndex=-1),l},F=(e,t)=>{const a=t!=null&&t.dataset.calendarSelectedYear?Number(t==null?void 0:t.dataset.calendarSelectedYear):e.selectedYear;e.currentType="year",W(e,t),k(e),A(e);const s=e.HTMLElement.querySelector(`.${e.CSSClasses.years}`);if(!e.settings.selection.year||!s)return;s.classList.add(e.CSSClasses.yearsSelecting);const n=e.type!=="multiple"||e.selectedYear===a?0:1,l=document.createElement("button");l.type="button";for(let i=e.viewYear-7;i<e.viewYear+8;i++){const r=i<e.dateMin.getFullYear()+n||i>e.dateMax.getFullYear(),d=lt(e,l,a,r,i);s.appendChild(d),e.actions.getYears&&e.actions.getYears(i,d,e)}},it=(e,t)=>{const a=t.target.closest(`.${e.CSSClasses.arrow}`);a&&(["default","multiple"].includes(e.currentType)?x(e,a.dataset.calendarArrow):e.currentType==="year"&&e.viewYear!==void 0&&(e.viewYear+={prev:-15,next:15}[a.dataset.calendarArrow],F(e,t.target)),e.actions.clickArrow&&e.actions.clickArrow(t,e))},rt=(e,t)=>{var a;if(!e.settings.visibility.weekNumbers||!e.actions.clickWeekNumber)return;const s=t.target.closest(`.${e.CSSClasses.weekNumber}`),n=(a=e.HTMLElement)==null?void 0:a.querySelectorAll("[data-calendar-week-number]");if(!s||!n)return;const l=Number(s.innerText),i=Number(s.dataset.calendarYearWeek),r=Array.from(n).filter((d=>Number(d.dataset.calendarWeekNumber)===l));e.actions.clickWeekNumber(t,l,r,i,e)},de=e=>`${e.charAt(0).toUpperCase()}${e.substring(1,e.length)}`.replace(/\./,""),dt=(e,t)=>{const a=new Date(`1978-01-0${t+1}T00:00:00.000Z`).toLocaleString(e.settings.lang,{weekday:"short",timeZone:"UTC"});e.locale.weekday.push(de(a))},ot=(e,t)=>{const a=new Date(`1978-${t+1<=9?`0${t+1}`:t+1}-01T00:00:00.000Z`).toLocaleString(e.settings.lang,{month:"long",timeZone:"UTC"});e.locale.months.push(de(a))},ct=e=>{if(e.settings.lang!=="define"||!e.locale.weekday[6]||!e.locale.months[11]){if(e.settings.lang==="define")throw new Error(b.notLocale);e.locale.weekday=[],e.locale.months=[];for(let t=0;t<7;t++)dt(e,t);for(let t=0;t<12;t++)ot(e,t)}},K=e=>{if(e.type!=="multiple")return 0;const t=e.HTMLElement.querySelectorAll(`.${e.CSSClasses.column}`),a=Array.from(t).findIndex((s=>s.classList.contains(`${e.CSSClasses.columnMonth}`)));return a>0?a:0},ut=(e,t,a,s,n,l)=>{const i=t.cloneNode(!1);return i.className=`${e.CSSClasses.monthsMonth}${a===l?` ${e.CSSClasses.monthsMonthSelected}`:n?` ${e.CSSClasses.monthsMonthDisabled}`:""}`,i.title=s,i.innerText=`${e.settings.visibility.monthShort?s.substring(0,3):s}`,i.dataset.calendarMonth=String(l),n&&(i.tabIndex=-1),i},oe=(e,t)=>{var a,s;const n=t!=null&&t.dataset.calendarSelectedMonth?Number(t.dataset.calendarSelectedMonth):e.selectedMonth,l=(a=t==null?void 0:t.closest(`.${e.CSSClasses.column}`))==null?void 0:a.querySelector(`.${e.CSSClasses.year}`),i=l?Number(l.dataset.calendarSelectedYear):e.selectedYear;e.currentType="month",W(e,t),k(e);const r=(s=e.HTMLElement)==null?void 0:s.querySelector(`.${e.CSSClasses.months}`);if(!e.settings.selection.month||!r)return;r.classList.add(e.CSSClasses.monthsSelecting);const d=e.jumpMonths>1?e.locale.months.map(((c,m)=>n-e.jumpMonths*m)).concat(e.locale.months.map(((c,m)=>n+e.jumpMonths*m))).filter((c=>c>=0&&c<=12)):Array.from(Array(12).keys()),o=document.createElement("button");o.type="button";for(let c=0;c<12;c++){const m=e.locale.months[c],y=c<e.dateMin.getMonth()+K(e)&&i<=e.dateMin.getFullYear()||c>e.dateMax.getMonth()+K(e)&&i>=e.dateMax.getFullYear()||c!==n&&!d.includes(c),p=ut(e,o,n,m,y,c);r.appendChild(p),e.actions.getMonths&&e.actions.getMonths(c,p,e)}},B=(e,t)=>e&&t?{0:{AM:"00",PM:"12"},1:{AM:"01",PM:"13"},2:{AM:"02",PM:"14"},3:{AM:"03",PM:"15"},4:{AM:"04",PM:"16"},5:{AM:"05",PM:"17"},6:{AM:"06",PM:"18"},7:{AM:"07",PM:"19"},8:{AM:"08",PM:"20"},9:{AM:"09",PM:"21"},10:{AM:"10",PM:"22"},11:{AM:"11",PM:"23"},12:{AM:"12",PM:"12"}}[Number(e)][t]:"",E=(e,t,a)=>e.querySelector(`.${t}${a?` input[name="${a}"]`:""}`),z=(e,t,a)=>{e.addEventListener("mouseover",(()=>t.classList.add(a))),e.addEventListener("mouseout",(()=>t.classList.remove(a)))},S=(e,t,a,s)=>{({hours:()=>{e.selectedHours=a},minutes:()=>{e.selectedMinutes=a}})[s](),e.selectedTime=`${e.selectedHours}:${e.selectedMinutes}${e.selectedKeeping?` ${e.selectedKeeping}`:""}`,e.actions.changeTime&&e.actions.changeTime(t,e),e.input&&e.HTMLInputElement&&e.actions.changeToInput&&e.actions.changeToInput(t,e)},V=(e,t,a,s,n,l)=>{t.addEventListener("input",(i=>{const r=i.target,d=Number(r.value),o=d<10?`0${d}`:`${d}`;if(n!=="hours"||l!==12)return a.value=o,void S(e,i,o,n);d<l&&d>0?(a.value=o,e.selectedKeeping="AM",s.innerText=e.selectedKeeping,S(e,i,o,n)):(d===0?(e.selectedKeeping="AM",s.innerText="AM"):(e.selectedKeeping="PM",s.innerText="PM"),a.value=D(r.value),S(e,i,D(r.value),n))}))},G=(e,t,a,s,n,l)=>{a.addEventListener("change",(i=>{const r=i.target,d=Number(r.value),o=d<10?`0${d}`:`${d}`;n==="hours"&&l===12?r.value&&d<=l&&d>0?(r.value=o,t.value=B(o,e.selectedKeeping),S(e,i,o,n)):r.value&&d<24&&(d>l||d===0)?(d===0?(e.selectedKeeping="AM",s.innerText="AM"):(e.selectedKeeping="PM",s.innerText="PM"),r.value=D(r.value),t.value=o,S(e,i,D(r.value),n)):r.value=e.selectedHours:r.value&&d<=l&&d>=0?(r.value=o,t.value=o,S(e,i,o,n)):n==="hours"?r.value=e.selectedHours:n==="minutes"&&(r.value=e.selectedMinutes)}))},ht=(e,t,a)=>{t.addEventListener("click",(s=>{e.selectedKeeping=t.innerText.includes("AM")?"PM":"AM",t.innerText=e.selectedKeeping,a.value=B(e.selectedHours,e.selectedKeeping),S(e,s,e.selectedHours,"hours")}))},mt=(e,t,a)=>{const s=a===24?23:a||12,n=E(t,e.CSSClasses.timeRange,"hours"),l=E(t,e.CSSClasses.timeRange,"minutes"),i=E(t,e.CSSClasses.timeHours,"hours"),r=E(t,e.CSSClasses.timeMinutes,"minutes"),d=t.querySelector(`.${e.CSSClasses.timeKeeping}`);z(n,i,e.CSSClasses.isFocus),z(l,r,e.CSSClasses.isFocus),V(e,n,i,d,"hours",s),V(e,l,r,d,"minutes",0),G(e,n,i,d,"hours",s),G(e,l,r,d,"minutes",59),d&&ht(e,d,n)},Z=(e,t,a,s)=>`<label class="${t}"><input type="text"name="${e}"maxlength="2"value="${a}"${s?"disabled":""}></label>`,U=(e,t,a,s,n,l)=>`<label class="${t}"><input type="range"name="${e}"min="${a}"max="${s}"step="${n}"value="${l}"></label>`,gt=e=>{const t=e.HTMLElement.querySelector(`.${e.CSSClasses.time}`);if(!t)return;const a=e.settings.selection.time===!0?12:e.settings.selection.time,s=e.settings.selection.controlTime==="range",[n,l]=[0,23],[i,r]=[0,59];t.innerHTML=e.sanitizer(`<div class="${e.CSSClasses.timeContent}">${Z("hours",e.CSSClasses.timeHours,e.selectedHours,s)}${Z("minutes",e.CSSClasses.timeMinutes,e.selectedMinutes,s)}${a===12?`<button type="button" class="${e.CSSClasses.timeKeeping}"${s?"disabled":""}>${e.selectedKeeping}</button>`:""}</div><div class="${e.CSSClasses.timeRanges}">${U("hours",e.CSSClasses.timeRange,n,l,e.settings.selection.stepHours,e.selectedKeeping?B(e.selectedHours,e.selectedKeeping):e.selectedHours)}${U("minutes",e.CSSClasses.timeRange,i,r,e.settings.selection.stepMinutes,e.selectedMinutes)}</div>`),mt(e,t,a)},yt=(e,t,a)=>{const s=document.createElement("b");t.textContent="";for(let n=0;n<a.length;n++){const l=a[n],i=s.cloneNode(!0);i.className=`${e.CSSClasses.weekDay}`,i.className=`${e.CSSClasses.weekDay}${e.settings.visibility.weekend&&e.settings.iso8601?n===5||n===6?` ${e.CSSClasses.weekDayWeekend}`:"":e.settings.visibility.weekend&&!e.settings.iso8601&&(n===0||n===6)?` ${e.CSSClasses.weekDayWeekend}`:""}`,i.innerText=`${l}`,t.appendChild(i)}},X=e=>{const t=[...e.locale.weekday];t[0]&&(e.settings.iso8601&&t.push(t.shift()),e.HTMLElement.querySelectorAll(`.${e.CSSClasses.week}`).forEach((a=>yt(e,a,t))))},ce=["light","dark","system"],L={value:!1,set:()=>{L.value=!0},check:()=>L.value},ue=(e,t)=>ce.find((a=>{var s;return a!=="system"&&((s=e.getAttribute(t))==null?void 0:s.includes(a))})),M=(e,t)=>{e.dataset.calendarTheme=t},J=(e,t)=>{var a;if(a=t,M(e.HTMLElement,a.matches?"dark":"light"),e.settings.visibility.theme!=="system"||L.check())return;const s=n=>{const l=document.querySelectorAll(`.${e.CSSClasses.calendar}`);l==null||l.forEach((i=>M(i,n.matches?"dark":"light")))};t.addEventListener?t.addEventListener("change",s):t.addListener(s),L.set()},pt=(e,t,a)=>{new MutationObserver((s=>{for(let n=0;n<s.length;n++)if(s[n].attributeName===a){const l=ue(t,a);l&&M(e.HTMLElement,l);break}})).observe(t,{attributes:!0})},vt=(e,t)=>{const a=e.settings.visibility.themeDetect?document.querySelector(e.settings.visibility.themeDetect):null;if(!a)return void J(e,t);const s=e.settings.visibility.themeDetect.replace(/^.*\[(.+)\]/g,((l,i)=>i)),n=ue(a,s);n?(M(e.HTMLElement,n),pt(e,a,s)):J(e,t)},St=e=>{if(!ce.includes(e.settings.visibility.theme))throw new Error(b.incorrectTheme);if(window.matchMedia("(prefers-color-scheme)").media==="not all")return void M(e.HTMLElement,"light");({light:()=>M(e.HTMLElement,"light"),dark:()=>M(e.HTMLElement,"dark"),system:()=>vt(e,window.matchMedia("(prefers-color-scheme: dark)"))})[e.settings.visibility.theme]()},w=e=>{const t={default:()=>{X(e),$(e)},multiple:()=>{X(e),$(e)},month:()=>oe(e),year:()=>F(e)};St(e),ct(e),W(e),k(e),A(e),gt(e),t[e.currentType]()},h={self:null,rangeMin:void 0,rangeMax:void 0},Q=()=>{var e;if(!((e=h.self)!=null&&e.HTMLElement))return;const{CSSClasses:t}=h.self;h.self.HTMLElement.querySelectorAll(`.${h.self.CSSClasses.dayBtnHover}`).forEach((a=>{var s;a.classList.remove(h.self.CSSClasses.dayBtnHover),(s=a.parentElement)==null||s.classList.remove(t.dayHoverIntermediate,t.dayHoverFirst,t.dayHoverLast)}))},Mt=(e,t,a)=>{var s,n,l;if(!((s=h.self)!=null&&s.selectedDates))return;const i=v(e),{CSSClasses:r}=h.self;if((n=h.self.rangeDisabled)!=null&&n.includes(i))return;const d=(l=h.self.HTMLElement)==null?void 0:l.querySelectorAll(`[data-calendar-day="${i}"]`);d==null||d.forEach((o=>{var c;o.classList.add(r.dayBtnHover),(c=o.parentElement)==null||c.classList.add(r.dayHoverIntermediate)})),t==null||t.forEach((o=>{var c;return(c=o.parentElement)==null?void 0:c.classList.add(r.dayHoverFirst)})),a==null||a.forEach((o=>{var c;return(c=o.parentElement)==null?void 0:c.classList.add(r.dayHoverLast)}))},_=e=>{var t;if(!e.target||!((t=h.self)!=null&&t.selectedDates))return;if(!e.target.closest(`.${h.self.CSSClasses.days}`))return void Q();const a=e.target.closest("[data-calendar-day]");if(!a)return;const s=a.dataset.calendarDay,n=g(h.self.selectedDates[0]),l=g(s),i=h.self.HTMLElement.querySelectorAll(`[data-calendar-day="${h.self.selectedDates[0]}"]`),r=h.self.HTMLElement.querySelectorAll(`[data-calendar-day="${s}"]`),[d,o]=n<l?[i,r]:[r,i],[c,m]=n<l?[n,l]:[l,n];Q();for(let y=new Date(c);y<=m;y.setDate(y.getDate()+1))Mt(y,d,o)},N=e=>{h.self&&e.key==="Escape"&&(h.self.selectedDates=[],h.self.HTMLElement.removeEventListener("mousemove",_),document.removeEventListener("keydown",N),w(h.self))},ft=()=>{var e,t,a;if(!((t=(e=h.self)==null?void 0:e.selectedDates)!=null&&t[0])||!((a=h.self.rangeDisabled)!=null&&a[0]))return;const s=g(h.self.selectedDates[0]),[n,l]=h.self.rangeDisabled.map((i=>g(i))).reduce((([i,r],d)=>[s>=d?d:i,s<d&&r===null?d:r]),[null,null]);n&&(h.self.rangeMin=v(new Date(n.setDate(n.getDate()+1)))),l&&(h.self.rangeMax=v(new Date(l.setDate(l.getDate()-1))))},he=(e,t)=>{var a;if(t){const s=e.selectedDates.length===1&&e.selectedDates[0].includes(t);e.selectedDates=s&&!e.settings.selection.cancelableDay?[t,t]:s&&e.settings.selection.cancelableDay?[]:e.selectedDates.length>1?[t]:[...e.selectedDates,t],(a=e.selectedDates)==null||a.sort(((n,l)=>+new Date(n)-+new Date(l)))}e.settings.range.disableGaps&&(h.rangeMin=h.rangeMin?h.rangeMin:e.rangeMin,h.rangeMax=h.rangeMax?h.rangeMax:e.rangeMax),h.self=e,{set:()=>{e.HTMLElement.addEventListener("mousemove",_),document.addEventListener("keydown",N),e.settings.range.disableGaps&&ft()},reset:()=>{const[s,n]=[e.selectedDates[0],e.selectedDates[e.selectedDates.length-1]];e.selectedDates=e.selectedDates[0]!==e.selectedDates[e.selectedDates.length-1]?e.settings.range.edgesOnly?[s,n]:f([`${s}:${n}`]):[e.selectedDates[0],e.selectedDates[0]],e.HTMLElement.removeEventListener("mousemove",_),document.removeEventListener("keydown",N),e.settings.range.disableGaps&&h.self&&(h.self.rangeMin=h.rangeMin,h.self.rangeMax=h.rangeMax)}}[e.selectedDates.length===1?"set":"reset"]()},ee=(e,t,a)=>{if(!t.dataset.calendarDay)return;const s=t.dataset.calendarDay,n=t.classList.contains(e.CSSClasses.dayBtnSelected);if(n&&!e.settings.selection.cancelableDay)return;let l=!0;e.toggleSelected!==void 0&&(l=typeof e.toggleSelected=="function"?e.toggleSelected(e):e.toggleSelected),n&&!l||(e.selectedDates=n?e.selectedDates.filter((i=>i!==s)):a?[...e.selectedDates,s]:[s])},bt=(e,t)=>{var a;const s=t.target,n=d=>s.closest(`.${d}`),l=n(e.CSSClasses.dayBtn);if(!e.settings.selection.day||!["single","multiple","multiple-ranged"].includes(e.settings.selection.day)||!l)return;({single:()=>ee(e,l,!1),multiple:()=>ee(e,l,!0),"multiple-ranged":()=>he(e,l.dataset.calendarDay)})[e.settings.selection.day](),(a=e.selectedDates)==null||a.sort(((d,o)=>+new Date(d)-+new Date(o))),e.actions.clickDay&&e.actions.clickDay(t,e),e.input&&e.HTMLInputElement&&e.HTMLElement&&e.actions.changeToInput&&e.actions.changeToInput(t,e);const i=n(e.CSSClasses.dayBtnPrev),r=n(e.CSSClasses.dayBtnNext);({prev:()=>x(e,"prev"),next:()=>x(e,"next"),default:()=>$(e)})[i?"prev":r?"next":"default"]()},te=(e,t,a,s,n)=>{const l=e.HTMLElement.querySelectorAll(`.${e.CSSClasses.column}`),i=Array.from(l).findIndex((d=>d.classList.contains(t))),r=Number(l[i].querySelector(`.${a}`).getAttribute(n));return e.currentType==="month"&&i>=0?s-i:e.currentType==="year"&&e.selectedYear!==r?s-1:s},Ct=(e,t,a,s,n)=>{const l={year:()=>{var i,r;return(r=(i=e.actions).clickYear)==null?void 0:r.call(i,t,e)},month:()=>{var i,r;return(r=(i=e.actions).clickMonth)==null?void 0:r.call(i,t,e)}};({year:()=>{if(e.type==="multiple"){const i=te(e,e.CSSClasses.columnYear,e.CSSClasses.year,Number(n.dataset.calendarYear),"data-calendar-selected-year"),r=e.selectedMonth<e.dateMin.getMonth()&&i<=e.dateMin.getFullYear(),d=e.selectedMonth>e.dateMax.getMonth()&&i>=e.dateMax.getFullYear(),o=i<e.dateMin.getFullYear(),c=i>e.dateMax.getFullYear();r||o?(e.selectedYear=e.dateMin.getFullYear(),e.selectedMonth=e.dateMin.getMonth()):d||c?(e.selectedYear=e.dateMax.getFullYear(),e.selectedMonth=e.dateMax.getMonth()):e.selectedYear=i}else e.selectedYear=Number(n.dataset.calendarYear)},month:()=>{if(e.type==="multiple"){const i=te(e,e.CSSClasses.columnMonth,e.CSSClasses.month,Number(n.dataset.calendarMonth),"data-calendar-selected-month"),r=n.closest(`.${s.column}`).querySelector(`.${e.CSSClasses.year}`);e.selectedYear=Number(r.dataset.calendarSelectedYear);const d=i<e.dateMin.getMonth()&&e.selectedYear<=e.dateMin.getFullYear(),o=i>e.dateMax.getMonth()&&e.selectedYear>=e.dateMax.getFullYear();e.selectedMonth=d?e.dateMin.getMonth():o?e.dateMax.getMonth():i}else e.selectedMonth=Number(n.dataset.calendarMonth)}})[a](),l[a](),e.currentType=e.type,w(e)},ae=(e,t,a,s)=>{if(!e.settings.selection[a])return;const n=t.target,l=c=>n.closest(`.${c}`),i=l(s.header),r=l(s.item),d=l(e.CSSClasses.grid),o=l(e.CSSClasses.column);e.currentType!==a&&i?{year:()=>F(e,n),month:()=>oe(e,n)}[a]():r?Ct(e,t,a,s,r):(e.currentType===a&&i||e.type==="multiple"&&e.currentType===a&&d&&!o)&&(e.currentType=e.type,w(e))},me=e=>{const t=a=>{it(e,a),rt(e,a),bt(e,a),ae(e,a,"month",{header:e.CSSClasses.month,item:e.CSSClasses.monthsMonth,column:e.CSSClasses.columnMonth}),ae(e,a,"year",{header:e.CSSClasses.year,item:e.CSSClasses.yearsYear,column:e.CSSClasses.columnYear})};return e.HTMLElement.addEventListener("click",t),()=>e.HTMLElement.removeEventListener("click",t)},ge=(e,{year:t,month:a,dates:s,holidays:n,time:l}={})=>{var i;const r=ne({},e.settings.selected);e.settings.selected.year=t?r.year:e.selectedYear,e.settings.selected.month=a?r.month:e.selectedMonth,e.settings.selected.holidays=n?r.holidays:e.selectedHolidays,e.settings.selected.time=l?r.time:e.selectedTime,e.settings.selected.dates=s==="only-first"&&((i=e.selectedDates)!=null&&i[0])?[e.selectedDates[0]]:s===!0?r.dates:e.selectedDates,le(e),w(e),e.settings.selected=r,e.settings.selection.day==="multiple-ranged"&&s&&he(e)},ye=(e,t=!0)=>{e.isInputInit=!0;const a=document.createElement("div");return a.className=`${e.CSSClasses.calendar} ${e.CSSClasses.calendarToInput} ${e.CSSClasses.calendarHidden}`,e.HTMLElement=a,document.body.appendChild(e.HTMLElement),e.HTMLElement.style.visibility="hidden",t&&queueMicrotask((()=>{H(e.HTMLInputElement,a,e.settings.visibility.positionToInput,e.CSSClasses),e.HTMLElement.style.visibility="visible",e.show()})),ge(e,{year:!0,month:!0,dates:!0,holidays:!0,time:!0}),e.actions.initCalendar&&e.actions.initCalendar(e),me(e)},Dt=e=>{const t=[];e.HTMLInputElement=e.HTMLElement;const a=()=>H(e.HTMLInputElement,e.HTMLElement,e.settings.visibility.positionToInput,e.CSSClasses),s=i=>{i.key==="Escape"&&(e!=null&&e.HTMLInputElement&&(e!=null&&e.HTMLElement)&&e.hide(),document.removeEventListener("keydown",s))},n=i=>{var r;e&&i.target!==e.HTMLInputElement&&!((r=e.HTMLElement)!=null&&r.contains(i.target))&&(e.HTMLInputElement&&e.HTMLElement&&e.hide(),window.removeEventListener("resize",a),document.removeEventListener("click",n,{capture:!0}))},l=()=>{e.isInputInit?(H(e.HTMLInputElement,e.HTMLElement,e.settings.visibility.positionToInput,e.CSSClasses),e.HTMLElement.style.visibility="visible",e.show()):t.push(ye(e)),window.addEventListener("resize",a),document.addEventListener("click",n,{capture:!0}),document.addEventListener("keydown",s)};return e.HTMLInputElement.addEventListener("click",l),e.HTMLInputElement.addEventListener("focus",l),()=>{t.forEach((i=>i()))}},wt=(e,{year:t,month:a,dates:s,holidays:n,time:l}={})=>{if(!e.isInit)throw new Error(b.notInit);e.input&&!e.isInputInit&&ye(e,!1),ge(e,{year:t,month:a,dates:s,holidays:n,time:l}),e.actions.updateCalendar&&e.actions.updateCalendar(e)},Tt=e=>{var t,a,s,n,l,i;if(!e.isInit)throw new Error(b.notInit);e.input?((a=(t=e.HTMLElement)==null?void 0:t.parentElement)==null||a.removeChild(e.HTMLElement),(n=(s=e.HTMLInputElement)==null?void 0:s.replaceWith)==null||n.call(s,e.HTMLOriginalElement),e.HTMLInputElement=void 0):(i=(l=e.HTMLElement)==null?void 0:l.replaceWith)==null||i.call(l,e.HTMLOriginalElement),e.HTMLElement=e.HTMLOriginalElement,e.actions.destroyCalendar&&e.actions.destroyCalendar(e)};class Et extends Ee{constructor(t,a){if(super(),u(this,"init",(()=>{return(n=this).HTMLOriginalElement=n.HTMLElement.cloneNode(!0),n.isInit=!0,n.input?Dt(n):(le(n),w(n),n.actions.initCalendar&&n.actions.initCalendar(n),me(n));var n})),u(this,"update",(n=>wt(this,n))),u(this,"destroy",(()=>Tt(this))),u(this,"show",(()=>{var n;(n=this).currentType?(n.HTMLElement.classList.remove(n.CSSClasses.calendarHidden),n.actions.showCalendar&&n.actions.showCalendar(n)):n.HTMLElement.click()})),u(this,"hide",(()=>{var n;(n=this).currentType&&(n.HTMLElement.classList.add(n.CSSClasses.calendarHidden),n.actions.hideCalendar&&n.actions.hideCalendar(n))})),this.HTMLElement=typeof t=="string"?document.querySelector(t):t,!this.HTMLElement)throw new Error(b.notFoundSelector(t));if(!a)return;const s=(n,l)=>{Object.keys(l).forEach((i=>{typeof n[i]!="object"||typeof l[i]!="object"||l[i]instanceof Date?n[i]=l[i]:s(n[i],l[i])}))};s(this,a)}}console.log("Temporal Picker Script Loaded");function pe(e){return{type:e.type||"year",statePath:e.statePath,multiple:e.multiple||!1,rangeSelection:e.rangeSelection||!1,disabled:e.disabled||!1,readOnly:e.readOnly||!1,disabledOptions:e.disabledOptions||[],options:e.options||{},format:e.format||null,displayFormat:e.displayFormat||null,locale:(e.locale||"en").replace("_","-"),firstDayOfWeek:e.firstDayOfWeek??1,valueFormat:e.valueFormat||"string",minYear:e.minYear,maxYear:e.maxYear,minDate:e.minDate,maxDate:e.maxDate,yearRange:e.yearRange,minDay:e.minDay||1,maxDay:e.maxDay||31,showWeekNumber:e.showWeekNumber??!0,state:null,open:!1,calendar:null,currentYear:new Date().getFullYear(),rangeStart:null,rangeEnd:null,init(){this.state=e.state,this.rangeSelection&&this.state&&(this.rangeStart=this.state.start||null,this.rangeEnd=this.state.end||null),this.$watch("open",t=>{t&&this.type==="week"&&!this.calendar&&this.$refs.calendar?setTimeout(()=>this.initWeekCalendar(),10):t&&this.calendar&&this.calendar.update()}),this.$watch("state",t=>{this.rangeSelection&&t&&(this.rangeStart=t.start||null,this.rangeEnd=t.end||null)})},initWeekCalendar(){console.log("Init WeekCalendar with Range:",this.minYear,this.maxYear);const t=this.minYear?`${this.minYear}-01-01`:void 0,a=this.maxYear?`${this.maxYear}-12-31`:void 0;this.calendar=new Et(this.$refs.calendar,{type:"default",settings:{lang:this.locale,iso8601:this.firstDayOfWeek===1,visibility:{weekNumbers:this.showWeekNumber},range:{min:t,max:a,disablePast:!!t,disableFuture:!!a}},actions:{clickWeekNumber:(s,n,l,i)=>{console.log("Week Clicked:",{weekNumber:n,year:i,min:this.minYear,max:this.maxYear});const r=parseInt(i),d=parseInt(this.minYear),o=parseInt(this.maxYear);if(!isNaN(d)&&r<d){console.warn("Blocked past selection");return}if(!isNaN(o)&&r>o){console.warn("Blocked future selection");return}const c=`${i}-W${String(n).padStart(2,"0")}`;this.toggleOption(c)},clickArrow:(s,n,l)=>{console.log("Arrow Clicked:",{year:n,month:l}),this.enforceBoundaries(n)},changeMonth:(s,n,l,i)=>{console.log("Month Changed:",{year:l,month:i}),this.enforceBoundaries(l)}}}),this.calendar.init()},enforceBoundaries(t){const a=parseInt(t),s=parseInt(this.minYear),n=parseInt(this.maxYear);if(!isNaN(s)&&a<s){console.warn("Navigated before minYear, reverting..."),this.calendar.settings.selected.year=s,this.calendar.settings.selected.month=0,this.calendar.update();return}if(!isNaN(n)&&a>n){console.warn("Navigated after maxYear, reverting..."),this.calendar.settings.selected.year=n,this.calendar.settings.selected.month=11,this.calendar.update();return}},toggleOption(t){if(!(this.disabled||this.readOnly)&&!this.isOptionDisabled(t)){if(this.multiple){Array.isArray(this.state)||(this.state=[]);const a=this.state.indexOf(t);a===-1?this.state.push(t):this.state.splice(a,1),typeof t=="number"&&this.state.sort((s,n)=>s-n)}else{const a=this.state?String(this.state):"",s=String(t);a===s?this.state=null:this.state=t,this.syncState(),this.open=!1}this.syncState()}},selectMonth(t){if(this.disabled||this.readOnly)return;const a=String(t).padStart(2,"0"),s=`${this.currentYear}-${a}`;this.rangeSelection?this.handleRangeSelection(s):this.multiple?this.toggleOption(s):(this.state=s,this.syncState(),this.open=!1)},handleRangeSelection(t){console.log("Selecting:",t,"Start:",this.rangeStart,"End:",this.rangeEnd);try{this.rangeStart&&this.rangeEnd?(this.rangeStart=t,this.rangeEnd=null):this.rangeStart?t<this.rangeStart?(this.rangeEnd=this.rangeStart,this.rangeStart=t):this.rangeEnd=t:(this.rangeStart=t,this.rangeEnd=null),this.state={start:this.rangeStart,end:this.rangeEnd},console.log("Range computed:",this.state),this.syncState(),this.rangeStart&&this.rangeEnd&&(this.open=!1)}catch(a){console.error("Error in handleRangeSelection:",a),this.rangeStart&&this.rangeEnd&&(this.open=!1)}},hoverDate:null,handleHover(t){if(this.rangeSelection&&this.rangeStart&&!this.rangeEnd){const a=String(t).padStart(2,"0");this.hoverDate=`${this.currentYear}-${a}`}},handleMouseLeave(){this.hoverDate=null},selectAll(){if(this.disabled||this.readOnly)return;const t=Object.keys(this.options).map(a=>{const s=parseInt(a);return isNaN(s)?a:s}).filter(a=>!this.isOptionDisabled(a));this.state=t,this.syncState()},deselectAll(){this.disabled||this.readOnly||(this.state=[],this.syncState())},previousYear(){this.yearRange&&this.currentYear>this.yearRange.min&&this.currentYear--},nextYear(){this.yearRange&&this.currentYear<this.yearRange.max&&this.currentYear++},isSelected(t){return this.multiple&&Array.isArray(this.state)?this.state.includes(t):this.state===t},isMonthSelected(t){const a=String(t).padStart(2,"0"),s=`${this.currentYear}-${a}`;return this.rangeSelection?s===this.rangeStart||s===this.rangeEnd:this.multiple&&Array.isArray(this.state)?this.state.includes(s):this.state===s},isMonthDisabled(t){const a=String(t).padStart(2,"0"),s=`${this.currentYear}-${a}`;return this.minDate&&s<this.minDate||this.maxDate&&s>this.maxDate?!0:this.disabledOptions.includes(t)||this.disabledOptions.includes(s)},isInRange(t){if(!this.rangeSelection||!this.rangeStart)return!1;const a=String(t).padStart(2,"0"),s=`${this.currentYear}-${a}`;if(this.rangeEnd)return s>this.rangeStart&&s<this.rangeEnd;if(this.hoverDate){const n=this.rangeStart<this.hoverDate?this.rangeStart:this.hoverDate,l=this.rangeStart<this.hoverDate?this.hoverDate:this.rangeStart;return s>n&&s<l}return!1},isOptionDisabled(t){return this.disabledOptions.includes(t)},getDisplayValue(){return this.state?this.rangeSelection&&typeof this.state=="object"?this.state.start&&this.state.end?`${this.state.start} â†’ ${this.state.end}`:this.state.start||"":this.multiple&&Array.isArray(this.state)?this.state.length===0?"":this.type==="weekday"?this.state.map(t=>this.options[t]||t).join(", "):this.state.join(", "):this.options[this.state]?this.options[this.state]:String(this.state):""},syncState(){this.$wire.set(this.statePath,this.state)},clearSelection(){this.disabled||this.readOnly||(this.multiple?this.state=[]:this.state=null,this.syncState(),this.open=!1)}}}window.temporalPicker=pe;const se=()=>{typeof window.Alpine<"u"&&window.Alpine.data("temporalPicker",pe)};typeof window.Alpine<"u"?se():document.addEventListener("alpine:init",se);
//# sourceMappingURL=temporal-picker.js.map
